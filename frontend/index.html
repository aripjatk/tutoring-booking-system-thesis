<!doctype html>
<html lang="en" ng-app="tbsApp" ng-cloak>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tutoring Booking System (TBS)</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
  <link href="assets/styles.css" rel="stylesheet">
</head>
<body ng-controller="AppController as app" ng-class="app.theme">

  <nav class="navbar navbar-expand-lg border-bottom bg-body">
    <div class="container-fluid">
      <a class="navbar-brand fw-semibold" href="#!/">
        <i class="bi bi-calendar2-check me-2"></i>TBS
      </a>

      <div class="d-flex align-items-center gap-2">
        <button class="btn btn-outline-secondary btn-sm" type="button" ng-click="app.toggleTheme()" title="Toggle theme">
          <i class="bi" ng-class="{'bi-moon-stars': app.theme==='theme-light', 'bi-sun': app.theme==='theme-dark'}"></i>
        </button>

        <a class="btn btn-outline-secondary btn-sm position-relative" href="#!/notifications" ng-if="app.isAuthenticated()" title="Notifications">
          <i class="bi bi-bell"></i>
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" ng-if="app.notificationCount > 0">
            {{app.notificationCount}}
            <span class="visually-hidden">notifications</span>
          </span>
        </a>

        <span class="text-secondary small d-none d-md-inline" ng-if="app.isAuthenticated()">
          {{app.currentUser.username}}
          <span class="badge ms-2" ng-class="{'text-bg-primary': app.isTutor(), 'text-bg-success': app.isStudent()}">
            {{app.isTutor() ? 'Tutor' : (app.isStudent() ? 'Student' : 'User')}}
          </span>
        </span>

        <button class="btn btn-outline-danger btn-sm" type="button" ng-if="app.isAuthenticated()" ng-click="app.logout()">
          <i class="bi bi-box-arrow-right me-1"></i>Log out
        </button>
      </div>
    </div>
  </nav>

  <main class="container-fluid py-3">
    <div class="row g-3">
      <!-- Left menu - Tutor -->
      <div class="col-12 col-lg-2" ng-if="app.isTutor()">
        <div class="card sticky-top" style="top: 1rem;">
          <div class="card-body p-2">
            <a class="menu-link" href="#!/tutor/dashboard"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a>
            <a class="menu-link" href="#!/messages"><i class="bi bi-envelope me-2"></i>Messages</a>
            <a class="menu-link" href="#!/tutor/courses"><i class="bi bi-journal-text me-2"></i>Courses</a>
            <a class="menu-link" href="#!/tutor/students"><i class="bi bi-people me-2"></i>Students</a>
            <a class="menu-link" href="#!/tutor/sessions"><i class="bi bi-clock-history me-2"></i>Sessions</a>
            <a class="menu-link" href="#!/tutor/payments"><i class="bi bi-currency-dollar me-2"></i>Payments</a>
            <a class="menu-link" href="#!/tutor/notes"><i class="bi bi-journal-bookmark me-2"></i>Notes</a>
          </div>
        </div>
      </div>

      <!-- Left menu - Student -->
      <div class="col-12 col-lg-2" ng-if="app.isStudent()">
        <div class="card sticky-top" style="top: 1rem;">
          <div class="card-body p-2">
            <a class="menu-link" href="#!/student/dashboard"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a>
            <a class="menu-link" href="#!/messages"><i class="bi bi-envelope me-2"></i>Messages</a>
            <a class="menu-link" href="#!/student/courses"><i class="bi bi-journal-text me-2"></i>My courses</a>
            <a class="menu-link" href="#!/student/sessions"><i class="bi bi-clock-history me-2"></i>My sessions</a>
            <a class="menu-link" href="#!/student/homework"><i class="bi bi-pencil-square me-2"></i>My homework</a>
            <a class="menu-link" href="#!/student/payments"><i class="bi bi-currency-dollar me-2"></i>My payments</a>
            <a class="menu-link" href="#!/student/notes"><i class="bi bi-journal-bookmark me-2"></i>My notes</a>
          </div>
        </div>
      </div>

      <div class="col-12" ng-class="{'col-lg-10': (app.isTutor() || app.isStudent()), 'col-lg-12': (!app.isTutor() && !app.isStudent())}">
        <div ng-view></div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/angular@1.8.3/angular.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/angular-route@1.8.3/angular-route.min.js"></script>

  <script src="config.js"></script>
  <script src="app/app.js"></script>
  <script src="app/services/authService.js"></script>
  <script src="app/services/apiService.js"></script>

  <script src="app/controllers/appController.js"></script>
  <script src="app/controllers/loginController.js"></script>
  <script src="app/controllers/notesController.js"></script>
  <script src="app/controllers/messagesController.js"></script>
  <script src="app/controllers/messageDetailController.js"></script>
  <script src="app/controllers/messageComposeController.js"></script>
  <script src="app/controllers/notificationsController.js"></script>

  <script src="app/controllers/tutorDashboardController.js"></script>
  <script src="app/controllers/tutorCoursesController.js"></script>
  <script src="app/controllers/tutorCourseDetailController.js"></script>
  <script src="app/controllers/tutorStudentsController.js"></script>
  <script src="app/controllers/tutorStudentCreateController.js"></script>
  <script src="app/controllers/tutorSessionsController.js"></script>
  <script src="app/controllers/tutorSessionDetailController.js"></script>
  <script src="app/controllers/tutorPaymentsController.js"></script>

  <script src="app/controllers/studentDashboardController.js"></script>
  <script src="app/controllers/studentCoursesController.js"></script>
  <script src="app/controllers/studentCourseDetailController.js"></script>
  <script src="app/controllers/studentSessionsController.js"></script>
  <script src="app/controllers/studentHomeworkController.js"></script>
  <script src="app/controllers/studentHomeworkDetailController.js"></script>
  <script src="app/controllers/studentPaymentsController.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
