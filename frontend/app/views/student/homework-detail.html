<div class="d-flex align-items-center justify-content-between mb-3">
  <div>
    <h2 class="h4 mb-1">Assignment #{{vm.id}}</h2>
    <div class="text-secondary">Details & Submission</div>
  </div>
  <button class="btn btn-outline-secondary" ng-click="vm.back()">
    <i class="bi bi-arrow-left me-1"></i>Back
  </button>
</div>

<div class="alert alert-danger" ng-if="vm.state.error">
  <i class="bi bi-exclamation-triangle me-2"></i>{{vm.state.error}}
</div>
<div class="alert alert-success" ng-if="vm.state.success">
  <i class="bi bi-check-circle me-2"></i>{{vm.state.success}}
</div>

<div ng-if="vm.state.busy" class="d-flex align-items-center gap-2">
  <div class="spinner-border" role="status"></div>
  <div class="text-secondary">Loadingâ€¦</div>
</div>

<div class="card" ng-if="!vm.state.busy && vm.assignment">
  <div class="card-body">
    <h5 class="card-title">{{vm.assignment.name}}</h5>
    <h6 class="card-subtitle mb-2 text-muted">Session #{{vm.assignment.sessionID}}</h6>

    <div class="mb-4">
      <div class="fw-bold mb-1">Objective:</div>
      <p class="card-text">{{vm.assignment.objective}}</p>
    </div>

    <hr>

    <div class="mb-4">
      <h6 class="fw-bold">Your Solution</h6>
      <div ng-if="vm.assignment.solutionFileName" class="mb-2">
        <span class="text-success"><i class="bi bi-check-circle-fill me-1"></i>Submitted:
            <a href="" ng-click="vm.downloadFile()" class="text-decoration-none">{{vm.assignment.solutionFileName}}</a>
        </span>
      </div>
      <div ng-if="!vm.assignment.solutionFileName" class="mb-2 text-warning">
        <i class="bi bi-exclamation-circle me-1"></i>No solution submitted yet.
      </div>

      <div class="input-group mb-3">
        <input type="file" class="form-control" id="solutionFile">
        <button class="btn btn-primary" type="button" ng-click="vm.upload()">Upload Solution</button>
      </div>
    </div>

    <div class="alert alert-info" ng-if="vm.assignment.solutionFeedback">
        <h6 class="alert-heading"><i class="bi bi-chat-left-text me-2"></i>Tutor Feedback:</h6>
        <p class="mb-0">{{vm.assignment.solutionFeedback}}</p>
    </div>
  </div>
</div>
